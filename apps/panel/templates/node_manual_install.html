<header>
    <a href="#close" aria-label="Close" class="close"
        onclick="document.getElementById('manual-install-modal').close()"></a>
    Manual Install: {{ node.name }}
</header>
<div>
    <p><strong>Quick One-Liner (Remnawave-style)</strong></p>
    <div style="display: flex; gap: 0.5rem; margin-bottom: 1rem;">
        <input type="text" id="one-liner" value="" readonly
            style="flex-grow: 1; font-family: monospace; font-size: 0.85rem;">
        <button class="outline" onclick="
            const liner = document.getElementById('one-liner');
            liner.select();
            document.execCommand('copy');
            alert('Command copied!');
        ">Copy</button>
    </div>

    <p>Or manually run the full script:</p>
    <textarea style="height: 200px; font-family: monospace; font-size: 0.8rem;" readonly>{{ script }}</textarea>
</div>
<script>
    // Dynamically update the origin in the input value
    const origin = window.location.origin;
    const token = "{{ node.join_token.clone().unwrap_or_default() }}";
    document.getElementById('one-liner').value = `curl -fsSL https://raw.githubusercontent.com/semanticparadox/EXA-ROBOT/main/scripts/install.sh | sudo bash -s -- --role agent --panel "${origin}" --token "${token}"`;
</script>
<footer>
    <button class="secondary" onclick="
        let el = this.parentElement.previousElementSibling.querySelector('textarea');
        el.select();
        document.execCommand('copy');
        alert('Copied to clipboard!');
    ">Copy to Clipboard</button>
    <button class="outline" onclick="document.getElementById('manual-install-modal').close()">Close</button>
</footer>